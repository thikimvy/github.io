<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡¤å‡°å•ä¸›é¦™å‹å“é‰´æŒ‘æˆ˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2E7D32', // ä¸»è‰²è°ƒï¼šèŒ¶ç»¿è‰²
                        secondary: '#D4AF37', // è¾…åŠ©è‰²ï¼šé‡‘è‰²
                        neutral: '#F5F5DC', // ä¸­æ€§è‰²ï¼šç±³ç™½è‰²
                        dark: '#333333', // æ·±è‰²æ–‡æœ¬
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-tea-pattern {
                background-image: url("https://picsum.photos/id/145/1000/1000");
                background-size: cover;
                background-position: center;
                background-blend-mode: overlay;
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
            }
            .scale-up {
                animation: scaleUp 0.5s ease forwards;
            }
            @keyframes scaleUp {
                from { transform: scale(0.8); opacity: 0; }
                to { transform: scale(1); opacity: 1; }
            }
            .fade-in {
                animation: fadeIn 0.6s ease forwards;
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .shake {
                animation: shake 0.5s ease-in-out;
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                20%, 60% { transform: translateX(-5px); }
                40%, 80% { transform: translateX(5px); }
            }
            .number-card {
                transition: all 0.3s ease;
            }
            .number-card:hover {
                transform: scale(1.05);
            }
            .completed-card {
                opacity: 0.7;
                cursor: not-allowed;
            }
            .completed-card:hover {
                transform: none;
            }
        }
    </style>
</head>
<body class="bg-neutral min-h-screen font-sans text-dark">
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-primary text-white shadow-lg fixed w-full z-50 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa-solid fa-leaf text-secondary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold">å‡¤å‡°å•ä¸›<span class="text-secondary">å“é‰´é¦†</span></h1>
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="#" class="hover:text-secondary transition-colors duration-300">é¦–é¡µ</a>
                <a href="#" class="hover:text-secondary transition-colors duration-300">é¦™å‹ä»‹ç»</a>
                <a href="#" class="hover:text-secondary transition-colors duration-300">æ¸¸æˆè§„åˆ™</a>
                <a href="#" class="hover:text-secondary transition-colors duration-300">æ’è¡Œæ¦œ</a>
            </div>
            <button class="md:hidden text-white text-xl" id="menuToggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
        <!-- ç§»åŠ¨ç«¯èœå• -->
        <div class="md:hidden hidden bg-primary/95 backdrop-blur-md" id="mobileMenu">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#" class="py-2 hover:text-secondary transition-colors duration-300">é¦–é¡µ</a>
                <a href="#" class="py-2 hover:text-secondary transition-colors duration-300">é¦™å‹ä»‹ç»</a>
                <a href="#" class="py-2 hover:text-secondary transition-colors duration-300">æ¸¸æˆè§„åˆ™</a>
                <a href="#" class="py-2 hover:text-secondary transition-colors duration-300">æ’è¡Œæ¦œ</a>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <!-- æ¸¸æˆä»‹ç» -->
        <section class="mb-12 text-center fade-in">
            <h2 class="text-[clamp(1.8rem,4vw,3rem)] font-bold text-primary mb-4">å•ä¸›é¦™å‹ç›²ç›’æŒ‘æˆ˜</h2>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8">
                å‡¤å‡°å•ä¸›ï¼Œé¦™å‹åƒå˜ã€‚é€‰æ‹©ç¼–å·ï¼Œæµ‹è¯•ä½ çš„å“é‰´èƒ½åŠ›ï¼Œè§£é”èŒ¶é¦™ç§˜å¢ƒï¼
            </p>
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button class="bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-full shadow-lg transition-all duration-300 flex items-center gap-2" id="startGame">
                    <i class="fa-solid fa-play-circle"></i> å¼€å§‹æŒ‘æˆ˜
                </button>
                <button class="bg-white hover:bg-gray-100 text-primary border-2 border-primary py-3 px-6 rounded-full shadow-lg transition-all duration-300 flex items-center gap-2" id="howToPlay">
                    <i class="fa-solid fa-info-circle"></i> æ¸¸æˆè§„åˆ™
                </button>
            </div>
        </section>

        <!-- ç¼–å·é€‰æ‹©åŒºåŸŸ -->
        <section id="numberSelection" class="hidden max-w-4xl mx-auto">
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 mb-8" id="numberGrid">
                <!-- åŠ¨æ€ç”Ÿæˆç¼–å·å¡ç‰‡ -->
            </div>
            
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8 fade-in" id="flavorChallenge">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-primary" id="selectedNumber">ç¼–å·ï¼š--</h3>
                    <div class="bg-primary/10 text-primary px-4 py-2 rounded-full font-medium">
                        å·²å®Œæˆï¼š<span id="completedCount">0</span>/6
                    </div>
                </div>
                
                <div class="mb-6 text-center">
                    <div class="w-full h-48 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                        <img src="https://picsum.photos/id/175/800/600" alt="èŒ¶æ ·" class="w-full h-full object-cover scale-up" id="currentTeaImage">
                    </div>
                    <p class="text-lg mb-6">è¯·å“é‰´è¿™æ¬¾èŒ¶æ ·ï¼Œç„¶åè¾“å…¥æ‚¨è®¤ä¸ºæ­£ç¡®çš„é¦™å‹åç§°ï¼š</p>
                    
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input type="text" id="flavorInput" placeholder="è¯·è¾“å…¥é¦™å‹åç§°" 
                            class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-primary transition-colors duration-300">
                        <button id="submitAnswer" class="bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-lg shadow-lg transition-all duration-300">
                            æäº¤ç­”æ¡ˆ
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç»“æœå¼¹çª— -->
        <div id="resultModal" class="fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm hidden fade-in">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6 scale-up">
                <div class="text-center mb-6">
                    <div id="resultIcon" class="inline-block text-6xl mb-4"></div>
                    <h3 id="resultTitle" class="text-2xl font-bold mb-2"></h3>
                    <p id="resultMessage" class="text-lg text-gray-600"></p>
                </div>
                <div id="flavorImageContainer" class="w-full h-64 rounded-xl overflow-hidden mb-6 hidden">
                    <img id="flavorImage" src="" alt="" class="w-full h-full object-cover">
                </div>
                <div class="flex justify-center">
                    <button id="closeResult" class="bg-primary hover:bg-primary/90 text-white py-3 px-8 rounded-lg shadow-lg transition-all duration-300">
                        ç»§ç»­æŒ‘æˆ˜
                    </button>
                </div>
            </div>
        </div>

        <!-- å®ŒæˆæŒ‘æˆ˜åŒºåŸŸ -->
        <section id="challengeCompleted" class="hidden max-w-2xl mx-auto text-center fade-in">
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="text-6xl text-secondary mb-4">ğŸ‰</div>
                <h2 class="text-2xl md:text-3xl font-bold text-primary mb-4">æ­å–œæ‚¨å®ŒæˆæŒ‘æˆ˜ï¼</h2>
                <p class="text-lg mb-6">æ‚¨å·²æˆåŠŸè¯†åˆ«æ‰€æœ‰å‡¤å‡°å•ä¸›é¦™å‹ï¼Œè·å¾—ã€Œå•ä¸›å“é‰´å¤§å¸ˆã€ç§°å·ï¼</p>
                
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-8">
                    <!-- å·²è§£é”çš„é¦™å‹ç¼©ç•¥å›¾ -->
                    <div id="unlockedFlavors" class="col-span-full grid grid-cols-2 sm:grid-cols-3 gap-4">
                        <!-- åŠ¨æ€ç”Ÿæˆå·²è§£é”çš„é¦™å‹ç¼©ç•¥å›¾ -->
                    </div>
                </div>
                
                <div class="flex flex-wrap justify-center gap-4">
                    <button id="shareResult" class="bg-secondary hover:bg-secondary/90 text-white py-3 px-6 rounded-full shadow-lg transition-all duration-300 flex items-center gap-2">
                        <i class="fa-solid fa-share-alt"></i> åˆ†äº«æˆç»©
                    </button>
                    <button id="restartGame" class="bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-full shadow-lg transition-all duration-300 flex items-center gap-2">
                        <i class="fa-solid fa-redo"></i> å†æ¬¡æŒ‘æˆ˜
                    </button>
                </div>
            </div>
        </section>

        <!-- æ¸¸æˆè§„åˆ™æ¨¡æ€æ¡† -->
        <div id="rulesModal" class="fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm hidden fade-in">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 p-6 scale-up max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-primary">æ¸¸æˆè§„åˆ™</h3>
                    <button id="closeRules" class="text-gray-500 hover:text-gray-700 text-xl">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4 text-lg">
                    <p>1. æœ¬æ¸¸æˆåŒ…å«å‡¤å‡°å•ä¸›å…­å¤§ç»å…¸é¦™å‹ï¼šèœœå…°é¦™ã€é¸­å±é¦™ã€å§œèŠ±é¦™ã€å¤§ä¹Œå¶ã€é”¯æœµä»”ã€æŸšèŠ±é¦™ã€‚</p>
                    <p>2. ç‚¹å‡»ä¸‹æ–¹ç¼–å·é€‰æ‹©æ‚¨è¦å“é‰´çš„èŒ¶æ ·ï¼Œè¾“å…¥å¯¹åº”çš„é¦™å‹åç§°ã€‚</p>
                    <p>3. æ¯çŒœå¯¹ä¸€æ¬¾é¦™å‹ï¼Œå³å¯è§£é”è¯¥é¦™å‹çš„è¯¦ç»†ä»‹ç»å’Œç²¾ç¾å›¾ç‰‡ã€‚</p>
                    <p>4. å®Œæˆå…¨éƒ¨6æ¬¾é¦™å‹çš„æŒ‘æˆ˜åï¼Œæ‚¨å°†è·å¾—ã€Œå•ä¸›å“é‰´å¤§å¸ˆã€ç§°å·ï¼Œå¹¶å¯åˆ†äº«æˆç»©åˆ°ç¤¾äº¤å¹³å°ã€‚</p>
                    <p>5. æ‚¨å¯ä»¥éšæ—¶ç‚¹å‡»å³ä¸Šè§’"æ’è¡Œæ¦œ"æŸ¥çœ‹å…¶ä»–èŒ¶å‹çš„æˆç»©ã€‚</p>
                    <div class="mt-6 bg-primary/5 p-4 rounded-lg">
                        <h4 class="font-bold text-primary mb-2">é¦™å‹çŸ¥è¯†å°è¯¾å ‚</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>èœœå…°é¦™ï¼šå…°é¦™æ¸…å¹½ï¼Œæ»‹å‘³é†‡åšï¼Œå›ç”˜å¸¦èœœéŸµ</li>
                            <li>é¸­å±é¦™ï¼šèŠ±é¦™é«˜é”ï¼ŒèŒ¶å‘³æµ“çƒˆï¼Œå›ç”˜è¿…çŒ›</li>
                            <li>å§œèŠ±é¦™ï¼šé¦™æ°”ä¼¼å§œèŠ±ï¼Œæ»‹å‘³ç”˜æ»‘ï¼Œå¾®å¸¦å§œéŸµ</li>
                            <li>å¤§ä¹Œå¶ï¼šå¶è‰²æ·±ç»¿ï¼Œé¦™æ°”æµ“éƒï¼Œæ»‹å‘³åšé‡</li>
                            <li>é”¯æœµä»”ï¼šå¶è¾¹å‘ˆé”¯é½¿çŠ¶ï¼Œèœœé¦™æ¸…å¹½ï¼Œå›ç”˜åŠ›å¼º</li>
                            <li>æŸšèŠ±é¦™ï¼šé¦™æ°”ä¼¼æŸšå­èŠ±ï¼Œæ»‹å‘³æ¸…çˆ½ï¼Œå–‰éŸµç”˜æ¶¦</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <button id="startFromRules" class="bg-primary hover:bg-primary/90 text-white py-3 px-8 rounded-lg shadow-lg transition-all duration-300">
                        å¼€å§‹æŒ‘æˆ˜
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-primary text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa-solid fa-leaf text-secondary text-2xl"></i>
                        <h3 class="text-xl font-bold">å‡¤å‡°å•ä¸›å“é‰´é¦†</h3>
                    </div>
                    <p class="text-gray-200 mb-4">æ¢ç´¢å‡¤å‡°å•ä¸›çš„é¦™å‹å¥¥ç§˜ï¼Œæ„Ÿå—åƒå¹´èŒ¶æ–‡åŒ–çš„ç‹¬ç‰¹é­…åŠ›ã€‚</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">
                            <i class="fa-brands fa-weixin text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">
                            <i class="fa-brands fa-weibo text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">
                            <i class="fa-brands fa-instagram text-xl"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">å¿«é€Ÿé“¾æ¥</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">é¦–é¡µ</a></li>
                        <li><a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">é¦™å‹ä»‹ç»</a></li>
                        <li><a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">å…³äºæˆ‘ä»¬</a></li>
                        <li><a href="#" class="text-gray-200 hover:text-secondary transition-colors duration-300">è´­ä¹°èŒ¶å¶</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">è”ç³»æˆ‘ä»¬</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start space-x-3">
                            <i class="fa-solid fa-map-marker-alt mt-1"></i>
                            <span class="text-gray-200">å¹¿ä¸œçœæ½®å·å¸‚å‡¤å‡°é•‡èŒ¶æ–‡åŒ–è¡—88å·</span>
                        </li>
                        <li class="flex items-center space-x-3">
                            <i class="fa-solid fa-phone"></i>
                            <span class="text-gray-200">400-888-8888</span>
                        </li>
                        <li class="flex items-center space-x-3">
                            <i class="fa-solid fa-envelope"></i>
                            <span class="text-gray-200">info@fenghuangtea.com</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2025 å‡¤å‡°å•ä¸›å“é‰´é¦†. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <script>
        // é¦™å‹æ•°æ®
        const flavorData = [
            {
                id: 1,
                name: "èœœå…°é¦™",
                image: "https://picsum.photos/id/106/800/600",
                description: "å…°é¦™æ¸…å¹½ï¼Œæ»‹å‘³é†‡åšï¼Œå›ç”˜å¸¦èœœéŸµ",
                thumbnail: "https://picsum.photos/id/106/200/200"
            },
            {
                id: 2,
                name: "é¸­å±é¦™",
                image: "https://picsum.photos/id/175/800/600",
                description: "èŠ±é¦™é«˜é”ï¼ŒèŒ¶å‘³æµ“çƒˆï¼Œå›ç”˜è¿…çŒ›",
                thumbnail: "https://picsum.photos/id/175/200/200"
            },
            {
                id: 3,
                name: "å§œèŠ±é¦™",
                image: "https://picsum.photos/id/110/800/600",
                description: "é¦™æ°”ä¼¼å§œèŠ±ï¼Œæ»‹å‘³ç”˜æ»‘ï¼Œå¾®å¸¦å§œéŸµ",
                thumbnail: "https://picsum.photos/id/110/200/200"
            },
            {
                id: 4,
                name: "å¤§ä¹Œå¶",
                image: "https://picsum.photos/id/112/800/600",
                description: "å¶è‰²æ·±ç»¿ï¼Œé¦™æ°”æµ“éƒï¼Œæ»‹å‘³åšé‡",
                thumbnail: "https://picsum.photos/id/112/200/200"
            },
            {
                id: 5,
                name: "é”¯æœµä»”",
                image: "https://picsum.photos/id/122/800/600",
                description: "å¶è¾¹å‘ˆé”¯é½¿çŠ¶ï¼Œèœœé¦™æ¸…å¹½ï¼Œå›ç”˜åŠ›å¼º",
                thumbnail: "https://picsum.photos/id/122/200/200"
            },
            {
                id: 6,
                name: "æŸšèŠ±é¦™",
                image: "https://picsum.photos/id/133/800/600",
                description: "é¦™æ°”ä¼¼æŸšå­èŠ±ï¼Œæ»‹å‘³æ¸…çˆ½ï¼Œå–‰éŸµç”˜æ¶¦",
                thumbnail: "https://picsum.photos/id/133/200/200"
            }
        ];

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            selectedFlavorId: null,
            completedFlavors: [],
        };

        // DOM å…ƒç´ 
        const navbar = document.getElementById('navbar');
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        const startGameBtn = document.getElementById('startGame');
        const howToPlayBtn = document.getElementById('howToPlay');
        const numberSelection = document.getElementById('numberSelection');
        const numberGrid = document.getElementById('numberGrid');
        const flavorChallenge = document.getElementById('flavorChallenge');
        const selectedNumber = document.getElementById('selectedNumber');
        const currentTeaImage = document.getElementById('currentTeaImage');
        const flavorInput = document.getElementById('flavorInput');
        const submitAnswerBtn = document.getElementById('submitAnswer');
        const resultModal = document.getElementById('resultModal');
        const resultIcon = document.getElementById('resultIcon');
        const resultTitle = document.getElementById('resultTitle');
        const resultMessage = document.getElementById('resultMessage');
        const flavorImageContainer = document.getElementById('flavorImageContainer');
        const flavorImage = document.getElementById('flavorImage');
        const closeResultBtn = document.getElementById('closeResult');
        const challengeCompleted = document.getElementById('challengeCompleted');
        const unlockedFlavors = document.getElementById('unlockedFlavors');
        const shareResultBtn = document.getElementById('shareResult');
        const restartGameBtn = document.getElementById('restartGame');
        const rulesModal = document.getElementById('rulesModal');
        const closeRulesBtn = document.getElementById('closeRules');
        const startFromRulesBtn = document.getElementById('startFromRules');
        const completedCount = document.getElementById('completedCount');

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', () => {
            initNavbarScroll();
            initMenuToggle();
            initEventListeners();
        });

        // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
        function initNavbarScroll() {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 10) {
                    navbar.classList.add('py-2', 'shadow-xl');
                    navbar.classList.remove('py-3', 'shadow-lg');
                } else {
                    navbar.classList.add('py-3', 'shadow-lg');
                    navbar.classList.remove('py-2', 'shadow-xl');
                }
            });
        }

        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        function initMenuToggle() {
            menuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                if (mobileMenu.classList.contains('hidden')) {
                    menuToggle.innerHTML = '<i class="fa-solid fa-bars"></i>';
                } else {
                    menuToggle.innerHTML = '<i class="fa-solid fa-times"></i>';
                }
            });
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            startGameBtn.addEventListener('click', startGame);
            howToPlayBtn.addEventListener('click', showRules);
            closeRulesBtn.addEventListener('click', hideRules);
            startFromRulesBtn.addEventListener('click', () => {
                hideRules();
                startGame();
            });
            submitAnswerBtn.addEventListener('click', checkAnswer);
            flavorInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
            closeResultBtn.addEventListener('click', closeResult);
            shareResultBtn.addEventListener('click', shareResult);
            restartGameBtn.addEventListener('click', restartGame);
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            gameState.completedFlavors = [];
            flavorChallenge.classList.add('hidden');
            
            document.querySelector('#numberSelection').classList.remove('hidden');
            document.querySelector('#challengeCompleted').classList.add('hidden');
            
            renderNumberCards();
            updateCompletedCount();
        }

        // æ¸²æŸ“ç¼–å·å¡ç‰‡
        function renderNumberCards() {
            numberGrid.innerHTML = '';
            
            flavorData.forEach(flavor => {
                const isCompleted = gameState.completedFlavors.includes(flavor.id);
                const card = document.createElement('div');
                card.className = `number-card bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer ${
                    isCompleted ? 'completed-card' : ''
                }`;
                card.innerHTML = `
                    <div class="text-4xl font-bold text-primary mb-2">${flavor.id}</div>
                    <div class="text-gray-500">
                        ${isCompleted ? '<i class="fa-solid fa-check-circle text-green-500"></i> å·²å®Œæˆ' : 'ç‚¹å‡»é€‰æ‹©'}
                    </div>
                `;
                
                if (!isCompleted) {
                    card.addEventListener('click', () => selectFlavor(flavor.id));
                }
                
                numberGrid.appendChild(card);
            });
        }

        // é€‰æ‹©é¦™å‹
        function selectFlavor(flavorId) {
            if (gameState.completedFlavors.includes(flavorId)) return;
            
            gameState.selectedFlavorId = flavorId;
            const flavor = flavorData.find(f => f.id === flavorId);
            
            if (!flavor) return;
            
            selectedNumber.textContent = `ç¼–å·ï¼š${flavor.id}å·`;
            currentTeaImage.src = flavor.image;
            currentTeaImage.alt = flavor.name;
            flavorInput.value = '';
            
            flavorChallenge.classList.remove('hidden');
            flavorInput.focus();
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const userAnswer = flavorInput.value.trim();
            const selectedFlavor = flavorData.find(f => f.id === gameState.selectedFlavorId);
            
            if (!selectedFlavor) return;
            
            if (userAnswer === '') {
                flavorInput.classList.add('shake', 'border-red-500');
                setTimeout(() => {
                    flavorInput.classList.remove('shake', 'border-red-500');
                }, 500);
                return;
            }
            
            // ç­”æ¡ˆæ­£ç¡®
            if (userAnswer === selectedFlavor.name) {
                gameState.completedFlavors.push(selectedFlavor.id);
                
                resultIcon.className = 'inline-block text-6xl mb-4 text-green-500';
                resultIcon.innerHTML = 'âœ…';
                resultTitle.textContent = 'æ­å–œæ‚¨ï¼';
                resultTitle.className = 'text-2xl font-bold mb-2 text-green-600';
                resultMessage.textContent = `æ‚¨å·²æˆåŠŸè¯†åˆ« ${selectedFlavor.name}ï¼`;
                
                flavorImageContainer.classList.remove('hidden');
                flavorImage.src = selectedFlavor.image;
                flavorImage.alt = selectedFlavor.name;
            } 
            // ç­”æ¡ˆé”™è¯¯
            else {
                resultIcon.className = 'inline-block text-6xl mb-4 text-red-500';
                resultIcon.innerHTML = 'âŒ';
                resultTitle.textContent = 'å†è¯•ä¸€æ¬¡ï¼';
                resultTitle.className = 'text-2xl font-bold mb-2 text-red-600';
                resultMessage.textContent = `æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${selectedFlavor.name}ã€‚`;
                
                flavorImageContainer.classList.remove('hidden');
                flavorImage.src = selectedFlavor.image;
                flavorImage.alt = selectedFlavor.name;
            }
            
            resultModal.classList.remove('hidden');
        }

        // å…³é—­ç»“æœå¼¹çª—
        function closeResult() {
            resultModal.classList.add('hidden');
            flavorChallenge.classList.add('hidden');
            
            updateCompletedCount();
            renderNumberCards();
            
            // å¦‚æœå®Œæˆäº†æ‰€æœ‰é¦™å‹ï¼Œæ˜¾ç¤ºå®Œæˆé¡µé¢
            if (gameState.completedFlavors.length === flavorData.length) {
                setTimeout(() => {
                    numberSelection.classList.add('hidden');
                    challengeCompleted.classList.remove('hidden');
                    renderUnlockedFlavors();
                }, 300);
            }
        }

        // æ›´æ–°å·²å®Œæˆæ•°é‡
        function updateCompletedCount() {
            completedCount.textContent = gameState.completedFlavors.length;
        }

        // æ¸²æŸ“å·²è§£é”çš„é¦™å‹
        function renderUnlockedFlavors() {
            unlockedFlavors.innerHTML = '';
            
            gameState.completedFlavors.forEach(flavorId => {
                const flavor = flavorData.find(f => f.id === flavorId);
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow-md overflow-hidden fade-in';
                card.innerHTML = `
                    <div class="h-32 overflow-hidden">
                        <img src="${flavor.thumbnail}" alt="${flavor.name}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-3 text-center">
                        <h4 class="font-bold text-primary">${flavor.name}</h4>
                        <p class="text-sm text-gray-600">${flavor.description}</p>
                    </div>
                `;
                unlockedFlavors.appendChild(card);
            });
        }

        // åˆ†äº«ç»“æœ
        function shareResult() {
            alert('åˆ†äº«åŠŸèƒ½å·²è§¦å‘ï¼åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè¿æ¥åˆ°ç¤¾äº¤åª’ä½“APIã€‚');
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            challengeCompleted.classList.add('hidden');
            startGame();
        }

        // æ˜¾ç¤ºæ¸¸æˆè§„åˆ™
        function showRules() {
            rulesModal.classList.remove('hidden');
        }

        // éšè—æ¸¸æˆè§„åˆ™
        function hideRules() {
            rulesModal.classList.add('hidden');
        }
    </script>
</body>
</html>
    